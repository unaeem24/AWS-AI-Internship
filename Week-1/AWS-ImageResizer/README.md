
## Project Overview

This project demonstrates the implementation of a fully serverless image processing workflow using AWS Lambda and Amazon S3, enhanced with an automated storage cleanup mechanism through Amazon EventBridge.

The solution enables real-time image resizing while ensuring cost-efficient storage management by automatically removing unnecessary uploaded files on a scheduled basis.

Step-by-Step Implementation
### 1. S3 Bucket Configuration

Two S3 buckets were provisioned in the eu-north-1 (Stockholm) region to manage the complete lifecycle of uploaded and processed images:

Source Bucket: images-upload-umair
Used for initial image uploads and as the Lambda trigger source.

Destination Bucket: images-resized-umair
Stores resized thumbnail outputs generated by the processing function.

Source Bucket(Original Image)

![alt text](image-7.png)

### Destination Bucket(Resized Image)

![alt text](image-8.png)

### 2. IAM Role and Permissions

A dedicated Lambda execution role named ResizerRole was created following the principle of least privilege, ensuring secure access while maintaining required functionality.

The role included the following managed policies:

AmazonS3FullAccess
Enables read access from the source bucket and write access to the destination bucket.

AWSLambdaBasicExecutionRole
Provides permissions for CloudWatch logging and operational monitoring.

### 3. Lambda Function for Image Resizing

The primary function, ImageResizer, was developed using Python 3.12 with the Pillow library, deployed via a Lambda Layer for modular dependency management.

![alt text](image-9.png)

Trigger Configuration

Activated automatically through an S3 ObjectCreated event in the source bucket.

Processing Logic

Downloads the newly uploaded image

Resizes it into a thumbnail format

Uploads the processed image into the destination bucket with a prefix:

resized-<original_filename>


This design ensures seamless, event-driven processing without requiring dedicated servers.

### 4. Automated Storage Cleanup (EventBridge Scheduled Rule)

To minimize unnecessary storage consumption and manage operational costs, an automated cleanup mechanism was implemented using Amazon EventBridge.

Event Rule

Rule Name: EODCleanup

Schedule Expression:

cron(0 18 * * ? *)


This triggers the cleanup function daily at the configured time.

Target Function

EmptyBucketLambda

This Lambda function programmatically deletes all objects from the source bucket, ensuring the upload bucket does not accumulate redundant files.

EventBridge Rule 'EODCleanup' Configuration
![alt text](image-3.png)

### 5. Verification and Troubleshooting
CloudWatch Monitoring

During development, Amazon CloudWatch Logs were used extensively for debugging and validation.

Key issues addressed included:

Resolving a NameError during early testing

Confirming correct execution of the IAM logging policy (AWSLambdaBasicExecutionRole)

CloudWatch Log Stream showing successful execution
![alt text](image-4.png)

Cron Rule Validation

To verify scheduled execution without waiting for the end-of-day trigger, the EventBridge rule was temporarily modified to run closer to the current time using a local time zone schedule.

This ensured the cleanup automation worked correctly before final deployment.

Updated EventBridge Rule for verification
![alt text](image-5.png)

### 6. Final Environment Cleanup

In compliance with internship safety and operational best practices, the scheduled cleanup rule was removed after successful testing to prevent unintended deletions outside of working hours.

Final validation confirmed:

Source bucket successfully emptied

Cron job disabled after verification

![alt text](image-6.png)

